<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="这是宋春林的个人独立博客，内容包括个人生活、一些评论、闲扯杂谈和专业学习等。">
    <meta name="author" content="Kaliludan" />
    <title>R 学习笔记（三） | Kaliludan</title>
    <link rel="shortcut icon" href="/favicon.png">
    <link href="http://localhost:4000/feed/" rel="alternate" title="Kaliludan" type="application/atom+xml" />
    <link rel="stylesheet" href="/cn/media/css/style.css">
    <link rel="stylesheet" href="/cn/media/css/highlight.css">
    <script type="text/javascript" src="/cn/media/js/jquery-1.7.1.min.js"></script>
  </head>

  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <h1><center><a class="" href="http://localhost:4000/">北河以北</a></center></h1>  
        </header>
        <center> <ul class="nav pills">
        <li><a title="主站" class="" href="http://songchunlin.net" target="_blank">主页</a></li>
        <li><a title="文章列表" class="" href="http://localhost:4000/archive/">归档</a></li>
        <li><a title="文章分类" class="" href="http://localhost:4000/categories/">分类</a></li>
        <li><a title="关于我和博客" class="" href="http://localhost:4000/about/">关于</a></li>
        <li><a title="个人简历" class="" href="http://localhost:4000/vitae/">简历</a></li>
        <li><a title="论文著作" class="" href="http://localhost:4000/publication/">发表</a></li>
        <li><a title="各种链接" class="" href="http://localhost:4000/links/">链接</a></li>

       </ul> </center>

        <article class="content">
        <h2>
  <center>R 学习笔记（三）</center>
</h2>
<h5>文/<a href="http://songchunlin.net/">宋春林</a></h5>
<section class="post">
<p>这是Computing for Data Analysis课程Week 3的学习笔记。这周的课程比较难，内容主要是作图。下面的笔记主要是课件，内容很多就没有翻译。</p>

<h1 id="1-simulation">1. Simulation</h1>

<p>Functions for probability distributions in R：</p>

<ul>
  <li>rnorm: generate random Normal variates with a given mean and standard deviation</li>
  <li>dnorm: evaluate the Normal probability density (with a given mean/SD) at a point (or vector of points)</li>
  <li>pnorm: evaluate the cumulative distribution function for a Normal distribution</li>
  <li>rpois: generate random Poisson variates with a given rate
Probability distribution functions usually have four functions associated with them. The functions are prefixed with a</li>
  <li>d for density</li>
  <li>r for random number generation</li>
  <li>p for cumulative distribution</li>
  <li>q for quantile function</li>
</ul>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="w"> 
</span><span class="n">dnorm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="n">pnorm</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lower.tail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">log.p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="n">qnorm</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lower.tail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">log.p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">sourcecode</span><span class="p">]</span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">[</span><span class="n">sourcecode</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Generating</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">Normal</span><span class="w"> </span><span class="n">variates</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1.38380206</span><span class="w"> </span><span class="m">0.48772671</span><span class="w"> </span><span class="m">0.53403109</span><span class="w"> </span><span class="m">0.66721944</span><span class="w"> </span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="m">0.01585029</span><span class="w"> </span><span class="m">0.37945986</span><span class="w"> </span><span class="m">1.31096736</span><span class="w"> </span><span class="m">0.55330472</span><span class="w"> </span><span class="p">[</span><span class="m">9</span><span class="p">]</span><span class="w"> </span><span class="m">1.22090852</span><span class="w"> </span><span class="m">0.45236742</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">23.38812</span><span class="w"> </span><span class="m">20.16846</span><span class="w"> </span><span class="m">21.87999</span><span class="w"> </span><span class="m">20.73813</span><span class="w"> </span><span class="m">19.59020</span><span class="w"> </span><span class="p">[</span><span class="m">6</span><span class="p">]</span><span class="w"> </span><span class="m">18.73439</span><span class="w"> </span><span class="m">18.31721</span><span class="w"> </span><span class="m">22.51748</span><span class="w"> </span><span class="m">20.36966</span><span class="w"> </span><span class="m">21.04371</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">summary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">Min.</span><span class="w"> </span><span class="m">1</span><span class="n">st</span><span class="w"> </span><span class="n">Qu.</span><span class="w"> </span><span class="n">Median</span><span class="w"> </span><span class="n">Mean</span><span class="w"> </span><span class="m">3</span><span class="n">rd</span><span class="w"> </span><span class="n">Qu.</span><span class="w"> </span><span class="n">Max.</span><span class="w"> </span><span class="m">18.32</span><span class="w"> </span><span class="m">19.73</span><span class="w"> </span><span class="m">20.55</span><span class="w"> </span><span class="m">20.67</span><span class="w"> </span><span class="m">21.67</span><span class="w"> </span><span class="m">23.39</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">sourcecode</span><span class="p">]</span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">[</span><span class="n">sourcecode</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">seed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">set.seed</span><span class="w"> </span><span class="n">ensures</span><span class="w"> </span><span class="n">reproducibility</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">set.seed</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">-0.6264538</span><span class="w"> </span><span class="m">0.1836433</span><span class="w"> </span><span class="m">-0.8356286</span><span class="w"> </span><span class="m">1.5952808</span><span class="w"> </span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="m">0.3295078</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">-0.8204684</span><span class="w"> </span><span class="m">0.4874291</span><span class="w"> </span><span class="m">0.7383247</span><span class="w"> </span><span class="m">0.5757814</span><span class="w"> </span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="m">-0.3053884</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">set.seed</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">-0.6264538</span><span class="w"> </span><span class="m">0.1836433</span><span class="w"> </span><span class="m">-0.8356286</span><span class="w"> </span><span class="m">1.5952808</span><span class="w"> </span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="m">0.3295078</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Always</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">seed</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">conducting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">simulation</span><span class="o">!</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">sourcecode</span><span class="p">]</span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">[</span><span class="n">sourcecode</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Generating</span><span class="w"> </span><span class="n">Poisson</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rpois</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rpois</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rpois</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ppois</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="n">Cumulative</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">0.6766764</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="n">Pr</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ppois</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">0.947347</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="n">Pr</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ppois</span><span class="p">(</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">0.9954662</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="n">Pr</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">sourcecode</span><span class="p">]</span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">[</span><span class="n">sourcecode</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">linear</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">set.seed</span><span class="p">(</span><span class="m">20</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">summary</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="n">Min.</span><span class="w"> </span><span class="m">1</span><span class="n">st</span><span class="w"> </span><span class="n">Qu.</span><span class="w"> </span><span class="n">Median</span><span class="w"> </span><span class="n">Mean</span><span class="w"> </span><span class="m">3</span><span class="n">rd</span><span class="w"> </span><span class="n">Qu.</span><span class="w"> </span><span class="n">Max.</span><span class="w"> </span><span class="m">-6.4080</span><span class="w"> </span><span class="m">-1.5400</span><span class="w"> </span><span class="m">0.6789</span><span class="w"> </span><span class="m">0.6893</span><span class="w"> </span><span class="m">2.9300</span><span class="w"> </span><span class="m">6.5050</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">sourcecode</span><span class="p">]</span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">[</span><span class="n">sourcecode</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Poisson</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">set.seed</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">log.mu</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">rpois</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="nf">exp</span><span class="p">(</span><span class="n">log.mu</span><span class="p">))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">summary</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="n">Min.</span><span class="w"> </span><span class="m">1</span><span class="n">st</span><span class="w"> </span><span class="n">Qu.</span><span class="w"> </span><span class="n">Median</span><span class="w"> </span><span class="n">Mean</span><span class="w"> </span><span class="m">3</span><span class="n">rd</span><span class="w"> </span><span class="n">Qu.</span><span class="w"> </span><span class="n">Max.</span><span class="w"> </span><span class="m">0.00</span><span class="w"> </span><span class="m">1.00</span><span class="w"> </span><span class="m">1.00</span><span class="w"> </span><span class="m">1.55</span><span class="w"> </span><span class="m">2.00</span><span class="w"> </span><span class="m">6.00</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">sourcecode</span><span class="p">]</span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">[</span><span class="n">sourcecode</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"plain"</span><span class="p">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">draws</span><span class="w"> </span><span class="n">randomly</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">allowing</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">arbitrary</span><span class="w"> </span><span class="n">distributions.</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">set.seed</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="nb">letters</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"q"</span><span class="w"> </span><span class="s2">"b"</span><span class="w"> </span><span class="s2">"e"</span><span class="w"> </span><span class="s2">"x"</span><span class="w"> </span><span class="s2">"p"</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="n">permutation</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="n">Sample</span><span class="w"> </span><span class="n">w</span><span class="o">/</span><span class="n">replacement</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span></code></pre></figure>

<p><strong>Summary</strong></p>

<ul>
  <li>Drawing samples from specific probability distributions can be done with r*functions</li>
  <li>Standard distributions are built in: Normal, Poisson, Binomial, Exponential, Gamma, etc.</li>
  <li>The sample function can be used to draw random samples from arbitrary vectors</li>
  <li>Setting the random number generator seed via set.seed is critical for reproducibility</li>
</ul>

<h1 id="2-plotting-with-base-graphics">2. Plotting with Base Graphics</h1>

<p>Base graphics are usually constructed piecemeal, with each aspect of the plot handled separately through a series of function calls; this is often conceptually simpler and allows plotting to mirror the thought process Base graphics are used most commonly and are a very powerful system for creating 2-D graphics.</p>

<ul>
  <li>Calling plot(x, y) or hist(x) will launch a graphics device (if one is not already open) and draw the plot on the device</li>
  <li>If the arguments to plot are not of some special class, then the default method for plot is called; this function has many arguments, letting you set the title, x axis lable, y axis label, etc.</li>
  <li>The base graphics system has many parameters that can set and tweaked; these parameters are documented in ?par; it wouldn’t hurt to memorize this help page!
The par function is used to specify global graphics parameters that a?ect all plots in an R session. These parameters can often be overridden as arguments to specific plotting functions.</li>
  <li>pch: the plotting symbol (default is open circle)</li>
  <li>lty: the line type (default is solid line), can be dashed, dotted, etc.</li>
  <li>lwd: the line width, specified as an integer multiple(default is 1)</li>
  <li>col: the plotting color, specified as a number, string, or hex code; the colors function gives you a vector of colors by name(default is black)</li>
  <li>las: the orientation of the axis labels on the plot</li>
  <li>bg: the background color(default is transparent)</li>
  <li>mar: the margin size(default is bottom5.1 left4.1 top4.1 right2.1)</li>
  <li>oma: the outer margin size (default is 0 for all sides)</li>
  <li>mfrow: number of plots per row, column (plots are filled row-wise)</li>
  <li>mfcol: number of plots per row, column (plots are filled column-wise)</li>
  <li>plot: make a scatterplot, or other type of plot depending on the class of the object being plotted</li>
  <li>lines: add lines to a plot, given a vector x values and a corresponding vector of y values (or a 2-column matrix); this function just connects the dots</li>
  <li>points: add points to a plot</li>
  <li>text: add text labels to a plot using specified x, y coordinates</li>
  <li>title: add annotations to x, y axis labels, title, subtitle, outer margin</li>
  <li>mtext: add arbitrary text to the margins (inner or outer) of the plot</li>
  <li>axis: adding axis ticks/labels
The list of devices is found in ?Devices; there are also devices created by users on CRAN</li>
  <li>pdf: useful for line-type graphics, vector format, resizes well, usually portable</li>
  <li>postscript: older format, also vector format and resizes well, usually portable, can be used to create encapsulated postscript files, Windows systems often don’t have a postscript viewer</li>
  <li>xfig: good of you use Unix and want to edit a plot by hand</li>
  <li>png: bitmapped format, good for line drawings or images with solid colors, uses lossless compression (like the old GIF format), most web browsers can read this format natively, good for plotting many many many points, does not resize well</li>
  <li>jpeg: good for photographs or natural scenes, uses lossy compression, good for plotting many many many points, does not resize well, can be read by almost any computer and any web browser, not great for line drawings</li>
  <li>bitmap: needed to create bitmap files (png, jpeg) in certain situations (uses Ghostscript), also can be used to create a variety of other bitmapped formats not mentioned</li>
  <li>bmp: a nativeWindows bitmapped format</li>
</ul>

<h1 id="3-plotting-with-lattice">3. Plotting with Lattice</h1>

<p>Lattice Functions:</p>

<ul>
  <li>xyplot: this is the main function for creating scatterplots</li>
  <li>bwplot: box-and-whiskers plots (“boxplots”)</li>
  <li>histogram: histograms</li>
  <li>stripplot: like a boxplot but with actual points</li>
  <li>dotplot: plot dots on “violin strings”</li>
  <li>splom: scatterplot matrix; like pairs in base graphics system</li>
  <li>levelplot, contourplot: for plotting “image” data</li>
</ul>

<table>
  <tbody>
    <tr>
      <td>Lattice functions generally take a formula for their first argument, usually of the form:y ~ x</td>
      <td>f * g</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>On the left of the ~ is the y variable, on the right is the x variable</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>After the</td>
          <td>are conditioning variables — they are optional; the * indicates an interaction</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>The second argument is the data frame or list from which the variables in the formula should be obtained.</li>
  <li>If no data frame or list is passed, then the parent frame is used.</li>
  <li>If no other arguments are passed, there are defaults that can be used.</li>
</ul>

<p>Lattice functions behave differently from base graphics functions in one critical way.</p>

<ul>
  <li>Base graphics functions plot data directly the graphics device</li>
  <li>Lattice graphics functions return an object of class trellis.</li>
  <li>The print methods for lattice functions actually do the work of plotting the data on the graphics device.</li>
  <li>Lattice functions return “plot objects” that can, in principle, be stored (but it’s usually better to just save the code + data).</li>
  <li>On the command line, trellis objects are auto-printed so that it appears the function is plotting the data</li>
  <li>Lattice functions have a panel function which controls what happens inside each panel of the entire plot.</li>
</ul>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="w"> 
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span><span class="n">f</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gl</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Group 1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Group 2"</span><span class="p">))</span><span class="w">
</span><span class="n">xyplot</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="c1"># plots y vs. x conditioned on f.
</span><span class="n">xyplot</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w">
</span><span class="n">panel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="n">panel.xyplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="n">panel.abline</span><span class="p">(</span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w">
</span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span><span class="n">xyplot</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w">
</span><span class="n">panel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="n">panel.xyplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="n">panel.lmline</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">})</span></code></pre></figure>

<h1 id="4-graphics-with-ggplot2">4. Graphics with ggplot2</h1>

<p>The ggplot2 is a data visualization package for the statistical programming language R. Created by Hadley Wickham in 2005, ggplot2 is an implementation of Leland Wilkinson’s Grammar of Graphics—a general scheme for data visualization which breaks up graphs into semantic components such as scales and layers. (from Wikipedia)</p>

<p>The ggplot2 package implements a system for creating graphics in R based on a comprehensive and coherent grammar. This provides a consistency to graph creation often lacking in R, and allows the user to create graph types that are innovative and novel.</p>

<p>The simplest approach for creating graphs in ggplot2 is through the qplot() or quick plot function. The format is: qplot(x, y, data=, color=, shape=, size=, alpha=, geom=, method=, formula=,facets=, xlim=, ylim=, xlab=, ylab=, main=, sub=)</p>

<ul>
  <li>x : x values</li>
  <li>y : y values</li>
  <li>data: data frame to use (optional). If not specified, will create one, extracting vectors from the current environment.</li>
  <li>facets : faceting formula to use. Picks facet_wrap or facet_grid depending on whether the formula is one sided or two-sided</li>
  <li>margins : whether or not margins will be displayed</li>
  <li>geom : character vector specifying geom to use. Defaults to “point” if x and y are specified, and “histogram” if only x is specified.</li>
  <li>stat :character vector specifying statistics to use
position :character vector giving position adjustment to use</li>
  <li>xlim : limits for x axis</li>
  <li>ylim : limits for y axis</li>
  <li>log : which variables to log transform (“x”, “y”, or “xy”)</li>
  <li>main : character vector or expression for plot title</li>
  <li>xlab : character vector or expression for x axis label</li>
  <li>ylab : character vector or expression for y axis label</li>
  <li>asp : the y/x aspect ratio</li>
</ul>

<p>More about ggplot2 package:  ggplot2 reference manual; ggplot2: Elegant Graphics for Data Analysis by Hadley Wickham; graphics with ggplot2 in Quick-R</p>

<h2 id="comments">Comments</h2>

<p><strong><a href="#165" title="2014-02-14 23:58:37">kenny</a>:</strong> 这个把Matlab懂些了就是相通的吧</p>


</section>
<section class="meta">
<span class="author">
  <a>发表于</a>
</span>
<span class="time">
  
  <time datetime="2014-01-31">2014-01-31</time>
</span>
<br />


<span class="categories">
  分类
  
  <a href="http://localhost:4000/categories/#学无止境" title="学无止境">学无止境</a>&nbsp;
  
</span>


<span class="tags">
  标签 
  
  <a href="http://localhost:4000/tags/#R" title="R">R</a>&nbsp;
  
  <a href="http://localhost:4000/tags/#统计学" title="统计学">统计学</a>&nbsp;
  
  <a href="http://localhost:4000/tags/#Coursera" title="Coursera">Coursera</a>&nbsp;
  
</span>

</section>

<section class="comment">

<div id="ds-thread" class="ds-thread" data-url="/2014/01/r-note3/" data-title="R 学习笔记（三）" data-thread-key="R 学习笔记（三）" ></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"songchunlin2016"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>                          
</section>
    
                                  


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    if (e.target.nodeName.toUpperCase() != 'BODY') return;
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://localhost:4000/2014/01/web-reading-tools/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://localhost:4000/2014/02/if-undergraduate-again/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>

<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
<script>
MathJax.Hub.Config({
    tex2jax: {
		skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
	}
});
MathJax.Hub.Queue(function() {
	var all = MathJax.Hub.getAllJax(), i;
	for(i=0; i < all.length; i += 1) {
		all[i].SourceElement().parentNode.className += ' has-jax';
	}
});
</script>

        </article>
          <div><script>
  (function() {
    var cx = '006295899379521077361:pwotjnjztng';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
      </div>
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-49016899-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    </body>
    
<footer><p><small><center>
              <a href="http://songchunlin.net/en" title="宋春林的英文站点" target="_blank">英文</a> :: 
              <a href="http://www.zhihu.com/people/songcl" title="宋春林的知乎" target="_blank">知乎</a> :: 
              <a href="http://weibo.com/songchunlin" title="宋春林的微博" target="_blank">微博</a> :: 
              <a href="http://www.douban.com/people/iamscl/" title="宋春林的豆瓣" target="_blank">豆瓣</a> :: 
              <a href="https://500px.com/songchunlin" title="宋春林的摄影相册" target="_blank">500px</a> :: 
              <a href="https://github.com/songchunlin" title="宋春林的 GitHub" target="_blank">GitHub</a> :: 
              <a href="https://www.researchgate.net/profile/Chunlin_Song4" title="宋春林的 ResearchGate" target="_blank">ResearchGate</a> ::
              <a href="http://songchunlin.net/cn/feed/" title="RSS 订阅" target="_blank" >RSS</a>
            </center></small></p>
</footer>
</html>
